
<header ng-class="{top: scroll &gt; 82}" plat-width="plat-width">
  <section class="stats">
    <div class="label-input ver">
      <label>模式:</label><span><a href="#" ng-class="{active: listShow}" ng-click="listShow = true">列表</a><a href="#" ng-class="{active: !listShow}" ng-click="listShow = false">编辑</a></span>
    </div>
    <div class="label-input ver">
      <label>状态:</label><span><a href="#" ng-class="{active: stats == 1}" ng-click="stats = 1">有效</a><a href="#" ng-class="{active: stats == 0}" ng-click="stats = 0">无效</a></span>
    </div>
  </section>
  <section ng-include="'/static/mvms/partials/plat.html'" class="plat"></section>
</header>
<div ng-if="listShow" style="position: relative;">
  <div ng-show="plats &amp;&amp; plats.length" class="table_header channel"><span> <span>频道名称</span></span><span style="text-align: right;"><span style="margin-right: 20px;">#</span></span></div>
  <section ng-class="{active: list &amp;&amp; list.length}" class="list channel showList">
    <div ng-repeat="item in list | filter: search" sortable="sortable" h-light="h-light" class="item">
      <label style="width: 50%;"><span ng-bind="item.name"></span></label>
      <label style="width:50;"><a href="/columnManage/{{item.channelBean.cate_code}}?channel={{ item.name }}">查看栏目</a></label>
    </div>
  </section>
  <div class="index-box flist"><i ng-repeat="item in list" ng-bind="$index+1" class="index"></i></div>
</div>
<section ng-class="{active: list &amp;&amp; list.length}" ng-if="!listShow" class="list channel">
  <div ng-repeat="item in list | filter: search" h-light="h-light" class="item">
    <div ng-bind="$index+1" class="ndex"></div>
    <div class="item1">
      <div class="label-input label-text">
        <label>频道名称:</label>
        <input type="text" ng-model="item.name"/>
      </div>
      <div class="label-input label-text">
        <label>副标题:</label>
        <input type="text" ng-model="item.sub_title"/>
      </div>
      <div class="label-input label-text">
        <label>cate_code:</label>
        <input type="text" ng-model="item.channelBean.cate_code"/><small class="tip">*提示
          <div class="detail">
            <label>新建频道时必须要填，填完并提交之后不能再修改，望谨记（如果修改会造成栏目无法读取）</label>
          </div></small>
      </div>
      <div class="label-input label-text">
        <label>cid:</label>
        <input type="text" ng-model="item.channelBean.cid"/><small class="tip">*提示
          <div class="detail">
            <label>值可以与cate_code的值一样，也必须要填。如果不填android平台不能显示这个频道，cid可以修改</label>
          </div></small>
      </div>
      <div class="label-input">
        <label>模板选择:</label>
        <div class="label-radio horizon">
          <input ng-model="item.channelBean.layout" type="radio" value="1"/>横图
        </div>
        <div class="label-radio horizon">
          <input ng-model="item.channelBean.layout" type="radio" value="2"/>竖图
        </div>
      </div>
      <div class="label-input">
        <label>状态:</label>
        <div class="label-radio horizon">
          <input ng-model="item.status" type="radio" value="0"/>无效
        </div>
        <div class="label-radio horizon">
          <input ng-model="item.status" type="radio" value="1"/>有效
        </div>
      </div>
      <div class="label-input">
        <label>是否在导航显示:</label>
        <div class="label-radio horizon">
          <input ng-model="item.is_nav_list" type="radio" value="0"/>否 
        </div>
        <div class="label-radio horizon">
          <input ng-model="item.is_nav_list" type="radio" value="1"/>是
        </div>
      </div>
      <div class="label-input">
        <label>自动列表样式:</label>
        <select ng-model="item.more_list_layout_type">
          <option value="1">1 横图有压标</option>
          <option value="2">2 横图无压标</option>
          <option value="3">3 竖图有压标</option>
          <option value="4">4 竖图无压标</option>
          <option value="5">5 竖图有压标副标题显示播放数</option>
          <option value="6">6 横图压标取一句话推荐 </option>
          <option value="7">7 竖图压标取一句话推荐</option>
          <option value="8">8 横图压标取最新一期副标题 </option>
          <option value="9">9 竖图压标取最新一期副标题</option>
          <option value="11">11 横图两行标题压标取专辑名称</option>
        </select>
      </div>
      <div class="label-input label-text">
        <label>允许版本:</label>
        <input type="text" ng-model="item.sver_limit"/><small class="tip">*提示
          <div class="detail">
            <label>-1 允许全部版本; 指定的版本,版本号按英文逗号分割,开始和结尾必须加上英文逗号例如: ',4.0,4.0.1,4.0.2,'</label>
          </div></small>
      </div>
      <div class="label-input label-text">
        <label>排除版本:</label>
        <input type="text" ng-model="item.sver_exclude"/><small class="tip">*提示
          <div class="detail">
            <label>-1 不排除任何版本; 指定的版本,版本号按英文逗号分割,开始和结尾必须加上英文逗号例如: ',4.0,4.0.1,4.0.2,'</label>
          </div></small>
      </div>
      <div class="label-input label-text">
        <label>channeled:</label>
        <input type="text" ng-model="item.channeled"/><small class="tip">*提示
          <div class="detail">
            <label>统计用的数据</label>
          </div></small>
      </div>
    </div>
    <div class="item2">
      <div class="horizon"><img height="60" ng-src="{{item.icon}}" ng-click="view($event)"/>
        <!--input.vertical(type="file", upload="item.icon")-->
      </div>
      <div class="horizon"><img height="60" ng-src="{{item.icon_v4}}" ng-click="view($event)"/>
        <!--input.vertical(type="file", upload="item.icon_v4")-->
      </div>
      <button ng-click="upload(this)" class="vertical btn">上传图片</button>
    </div>
    <div ng-controller="channelConfigCtrl" class="item3">
      <p> <a href="#" ng-click="moveTop(this)">置顶</a><a href="#" ng-click="moveBottom(this)">置底</a></p>
      <p> <a href="#" ng-click="moveUp(this)">上移</a><a href="#" ng-click="moveDown(this)">下移</a></p>
      <p> <a href="#" ng-click="config()">频道配置</a></p>
      <p> <a href="/columnManage/{{item.channelBean.cate_code}}?channel={{ item.name }}">查看栏目</a></p>
    </div>
  </div>
</section>
<button ng-class="{show: list &amp;&amp; list.length}" ng-click="listProvider.save()" class="save btn">保存</button>
<script type="text/ng-template" id="channelConfig.html">
  <div class="modal-header">
    <h3>频道配置 - {{item.name || ''}}</h3>
  </div>
  <div class="modal-body">
    <div class="label-input label-text">
      <label>V3分类接口:</label>
      <input type="text" ng-model="item.channelBean.v3_cate_api" class="xxlarge"/>
    </div>
    <div class="label-input label-text">
      <label>内容分类接口:</label>
      <input type="text" ng-model="item.channelBean.cate_api" class="xxlarge"/>
      <button ng-click="getApi()" class="horizon btn">更新</button>
    </div>
    <div ng-show="categorys" class="cates">
      <div class="label-input label-text">
        <label>全部:</label>
        <div class="edit"><span class="label-radio horizon">
            <input ng-model="all" ng-change="allSelect()" type="checkbox"/>全部</span></div>
      </div>
      <div ng-repeat="cate in categorys" class="label-input label-text">
        <label>{{ cate.cate_name }}:</label>
        <div class="edit"><span ng-hide="!c.search_key" ng-repeat="c in cate.cates" class="label-radio horizon">
            <input type="checkbox" ng-change="addSelect(cate, c)" ng-model="c.select"/>{{ c.name }}</span></div>
      </div>
    </div>
    <div ng-show="selects.length" class="label-input label-text">
      <label>已筛选分类:</label>
      <div style="margin-left: 123px;margin-top: -30px;" class="selects">
        <div ng-repeat="select in selects" class="horizon label-input label-text"><span style="margin-left: 15px">{{ select.cateValue }}</span>
          <input type="text" ng-model="cateSort[select.cateValue]" class="mini"/>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button ng-click="cancel()" class="btn yellow">取消</button>
    <button ng-click="save()" class="btn blue">保存</button>
  </div>
</script>
<script type="text/ng-template" id="mutlUpload.html">
  <div class="modal-header">
    <h3>上传图片</h3>
  </div>
  <div class="modal-body">
    <div class="label-input label-text"><a ng-href="{{item.icon}}" target="_blank"><img width="60" ng-src="{{item.icon}}" style="display: inline-block;vertical-align: middle;margin-right: 20px;"/></a>
      <label>老图标(勿改):</label>
      <input type="text" ng-model="item.icon" class="xxlarge"/>
      <input type="file" upload="item.icon"/>
    </div>
    <div class="label-input label-text"><a ng-href="{{item.icon_v4}}" target="_blank"><img width="60" ng-src="{{item.icon_v4}}" style="display: inline-block;vertical-align: middle;margin-right: 20px;"/></a>
      <label>v4图标:</label>
      <input type="text" ng-model="item.icon_v4" class="xxlarge"/>
      <input type="file" upload="item.icon_v4"/>
    </div>
  </div>
  <div class="modal-footer">
    <button ng-click="cancel()" class="btn yellow">取消</button>
    <button ng-click="ok()" class="btn blue">确定</button>
  </div>
</script>